@page "/configuration"
@attribute [Authorize]

<style>
    .Config > div > div {
        border-bottom: 2px solid #555;
        padding: 4px 0;
    }

    .Config > div > div > span {
        display: inline-block;
        width: 200px;
    }

    .SaveConfigButton {
        position: absolute;
        right: 0;
        bottom: 0;
        margin-bottom: 20px;
        margin-right: 20px;
    }
</style>

<h2>@L["Configuration"]</h2>
@if (Config is null) {
    <p>@L["Loading"]</p>
} else {
    <button class="Button SaveConfigButton" @onclick="SaveConfig">@L["Save"]</button>
    <div class="Config">
        <h4>@L["Web"]</h4>
        <div>
            <div>
                <span>@L["EnablePassword"]</span>
                <input type="checkbox" checked="@Config.Web.PasswordEnabled" /> <!-- Is this correct? -->
            </div>
            <div>
                <span>@L["Password"]</span>
                <input type="password" @bind-value="Config.Web.Password" />
            </div>
        </div>
    </div>
}

@code {
    LobbybotConfig? Config;

    protected override async Task OnInitializedAsync() {
        Config = await Api.GetConfig();
    }

    async void SaveConfig() {
        if (Config is null) JS.Alert("Config is null!");
        else JS.Alert(JsonSerializer.Serialize(Config));// await Api.SaveConfig(Config);
    }
}